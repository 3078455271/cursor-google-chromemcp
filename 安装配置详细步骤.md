# 🔧 安装配置详细步骤

## 📋 系统要求

### 操作系统
- ✅ Windows 10/11
- ✅ macOS 10.15+
- ✅ Linux (Ubuntu 18.04+)

### 硬件要求
- **内存**：至少4GB RAM（推荐8GB+）
- **存储**：至少2GB可用空间
- **网络**：稳定的互联网连接

## 🛠️ 软件安装

### 第一步：安装Google Chrome
1. 访问：https://www.google.com/chrome/
2. 下载并安装最新版本Chrome浏览器
3. 验证安装：打开Chrome，检查版本号

### 第二步：安装Node.js
1. 访问：https://nodejs.org/
2. 下载LTS版本（推荐18.x或20.x）
3. 运行安装程序，使用默认设置
4. 验证安装：
   ```bash
   # 打开命令行，输入以下命令
   node --version
   npm --version
   ```
   应该显示版本号，如：v18.17.0

### 第三步：安装Cursor编辑器
1. 访问：https://cursor.sh/
2. 下载适合您系统的版本
3. 安装并启动Cursor

## 📁 项目配置

### 第一步：获取项目文件
1. **方式一：直接下载**
   - 下载整个`hd-backend`项目压缩包
   - 解压到：`D:\code\hd-backend`（Windows）或 `~/code/hd-backend`（Mac/Linux）

2. **方式二：Git克隆**（如果有Git）
   ```bash
   git clone [项目地址] D:\code\hd-backend
   ```

### 第二步：安装项目依赖
1. **打开命令行**
   - Windows：按`Win+R`，输入`cmd`
   - Mac：按`Cmd+Space`，输入`Terminal`
   - Linux：按`Ctrl+Alt+T`

2. **进入项目目录**
   ```bash
   cd D:\code\hd-backend\chrome-mcp-server
   ```

3. **安装依赖**
   ```bash
   npm install
   ```
   
   **注意**：
   - 安装过程可能需要3-5分钟
   - 如果网络慢，可以使用国内镜像：
     ```bash
     npm install --registry=https://registry.npmmirror.com
     ```

4. **验证安装**
   ```bash
   npm list
   ```
   应该显示已安装的包列表

### 第三步：配置Cursor MCP
1. **打开Cursor编辑器**
2. **打开项目文件夹**：File → Open Folder → 选择`D:\code\hd-backend`
3. **检查MCP配置**：
   - 查看是否有`.cursor`文件夹
   - 确认MCP服务器配置正确

## 🚀 启动服务

### 方式一：使用批处理文件（Windows推荐）
1. 找到文件：`D:\code\hd-backend\chrome-mcp-server\start.bat`
2. 双击运行
3. 看到以下信息表示成功：
   ```
   启动Chrome MCP服务器...
   Chrome MCP服务器已启动，等待连接...
   ```

### 方式二：命令行启动
1. 打开命令行
2. 进入目录：
   ```bash
   cd D:\code\hd-backend\chrome-mcp-server
   ```
3. 启动服务：
   ```bash
   npm start
   ```

### 方式三：开发模式启动
```bash
cd D:\code\hd-backend\chrome-mcp-server
npm run dev
```

## ✅ 验证安装

### 第一步：检查服务状态
启动后应该看到类似信息：
```
Chrome MCP Server started successfully
Listening for MCP connections...
Server ready on stdio transport
```

### 第二步：测试基本功能
在Cursor中对AI说：
```
"帮我测试一下Chrome浏览器功能，搜索'hello world'"
```

如果浏览器自动打开并执行搜索，说明配置成功！

## 🔧 高级配置

### 环境变量设置
创建`.env`文件（可选）：
```bash
# Chrome MCP Server 配置
NODE_ENV=production
PUPPETEER_SKIP_DOWNLOAD=false
DEBUG=false

# 浏览器设置
CHROME_HEADLESS=false
CHROME_TIMEOUT=30000
```

### MCP服务器配置
在Cursor的设置中，确保MCP配置如下：
```json
{
  "mcpServers": {
    "Chrome-Browser": {
      "disabled": false,
      "timeout": 120,
      "command": "node",
      "args": [
        "D:\\code\\hd-backend\\chrome-mcp-server\\index.js"
      ],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}
```

### 防火墙设置
如果遇到连接问题，请确保：
1. Windows防火墙允许Node.js和Chrome
2. 杀毒软件不阻止相关进程
3. 网络代理设置正确

## 🐛 故障排除

### 常见错误及解决方案

#### 错误1：`node: command not found`
**原因**：Node.js未正确安装或未添加到PATH
**解决**：
1. 重新安装Node.js
2. 重启命令行
3. 检查环境变量PATH

#### 错误2：`npm install` 失败
**原因**：网络问题或权限问题
**解决**：
1. 使用管理员权限运行命令行
2. 使用国内镜像：
   ```bash
   npm config set registry https://registry.npmmirror.com
   ```
3. 清理缓存：
   ```bash
   npm cache clean --force
   ```

#### 错误3：Chrome启动失败
**原因**：Chrome未安装或权限不足
**解决**：
1. 确认Chrome已正确安装
2. 以管理员身份运行
3. 检查Chrome版本是否过旧

#### 错误4：MCP连接失败
**原因**：Cursor配置问题
**解决**：
1. 检查MCP配置文件路径
2. 重启Cursor编辑器
3. 确认服务器正在运行

### 日志查看
如果遇到问题，可以查看详细日志：
```bash
# 启用调试模式
DEBUG=true node index.js
```

### 重置配置
如果配置出现问题，可以重置：
1. 删除`node_modules`文件夹
2. 重新运行`npm install`
3. 重启MCP服务器

## 📞 获取帮助

### 自助排查
1. 检查所有软件是否正确安装
2. 确认网络连接正常
3. 查看错误日志信息
4. 尝试重启相关服务

### 寻求支持
如果问题仍未解决：
1. 记录详细的错误信息
2. 说明您的操作系统和软件版本
3. 联系AI进化论-花生团队技术支持

## 🎉 安装完成

恭喜！如果您完成了以上所有步骤，现在可以：
- ✅ 使用AI控制Chrome浏览器
- ✅ 自动搜索任何内容
- ✅ 截图保存搜索结果
- ✅ 提取网页内容
- ✅ 执行各种浏览器操作

**开始享受智能浏览器控制的便利吧！** 🚀

---

*如有疑问，请参考《Chrome浏览器搜索功能-小白使用指南.md》*
